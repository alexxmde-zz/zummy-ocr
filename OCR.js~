var tesseract = require("node-tesseract");
var fs = require('fs');

module.exports = function() {
return {
	text: "",
	
	textPath: __dirname + "/text/",
	textName: "temporary",
	textExtension: ".zum",
	that: this,
	getTextPathNameExtension: function() {
		return this.textPath + this.textName + this.textExtension;
	},
	
	makeOcr: function(imagePathNameExtension, textPathNameExtension){
		
		//Verify access to image file.
		fs.access(imagePathNameExtension, fs.R_OK && fs.W_OK, function (err) {
			
		
			if(!err){
				//Extract text from image.
				tesseract.process(imagePathNameExtension, function( teserr, text ) {
				
					if( !teserr ) {
						//Write extracted text to file.
						fs.writeFile(that.getTextPathNameExtension(), text, function(fserr){
							if( !fserr ){
								console.log("OCR Realizado em " + that.getTextPathNameExtension());
							}
					});
				
				}
			});
			}
		});
		}
	};
	

};
